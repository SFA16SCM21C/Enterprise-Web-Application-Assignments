define(["jquery","modules/shared/notifications"],function(e,a){"use strict";function n(a){return e("#feedback_"+a).find("form#new_feedback")}function t(t){var d=n(t);d.find("#feedback_yes").click(function(n){n.preventDefault(),f(d),e.ajax({type:"POST",url:d.attr("action"),dataType:"json",data:{feedback_yes:"Yes","feedback[feedback_type]":t,authenticity_token:d.find("[name=authenticity_token]").val()},success:function(a){e("#feedback_"+t).find("form#new_feedback").remove(),e(a.feedback_partial).appendTo(e("#feedback_"+t).find("#feedback_vote"))},error:function(e){(new a.ErrorNotification).setMessage(e.message||"Error submitting feedback. Try again later.").show(),d.find(".help-loading").hide()}})}),d.find("#feedback_no").click(function(d){var o=n(t);d.preventDefault(),f(o),e.ajax({type:"POST",url:o.attr("action"),dataType:"json",data:{feedback_no:"No","feedback[feedback_type]":t,authenticity_token:e("[name=authenticity_token]").val()},success:function(a){e("#feedback_"+t).find("form#new_feedback").remove(),e(a.feedback_partial).appendTo(e("#feedback_"+t).find("#feedback_vote")),o.find("textarea#feedback_comment_"+t).focus(),i(t)},error:function(e){(new a.ErrorNotification).setMessage(e.message||"Error submitting feedback. Try again later.").show(),o.find(".help-loading").hide()}})})}function i(t){var i=n(t),f=i.find("input#feedback_comment");f.click(function(){return f.prop("disabled",!0),i.find(".help-loading").show(),e.ajax({type:"POST",url:i.attr("action"),dataType:"json",data:i.serialize(),success:function(a){e("#feedback_"+t).find("form#new_feedback").remove(),e(a.feedback_partial).appendTo(e("#feedback_"+t).find("#feedback_vote"))},error:function(e){(new a.ErrorNotification).setMessage(e.message||"Error submitting feedback. Try again later.").show(),i.find(".help-loading").hide()}}),!1})}function f(e){e.find("#feedback_yes").prop("disabled",!0),e.find("#feedback_no").prop("disabled",!0),e.find(".help-loading").show()}e(function(){t("art_sat"),i("art_sat"),t("trans_sat"),i("trans_sat")})});